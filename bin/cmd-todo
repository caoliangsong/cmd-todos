#!/usr/bin/env node

var main = require('../src/index')
var argv = process.argv
var argv2 = argv[2]
var colors= require('colors')
var reg = function(str){
    return new RegExp('^'+ str +'$','ig')
};

// get data

if(reg('get').test(argv2)){
    var n = argv[3]
    if(n === undefined){
         main.get()
    }else{
        main.get(n)
    }
}else if(reg('done|undone').test(argv2)){
    var n = parseInt(argv[3])
    if(typeof n !== 'number'){
        throw new Error('after done must be a number!')
    }
    main[argv2.toLowerCase()](n)
}else if(reg('add|del').test(argv2)){
    if(typeof argv[3] === 'undefined'){
        throw new Error('add content can not be undefined')
    }
    main[argv2.toLowerCase()](argv[3])
}else if(reg('clear').test(argv2) ){
    main[argv2]()
}else{
    console.log(`
        cmd-todo@1.3.4
        ------------------------------------------
        commands:
        cmd-todo -h -help  show help 
        cmd-todo get:  show all todos
        cmd-todo add xxx: add new item set content xxx
        cmd-todo done xxx: modify item id=xxx done
        cmd-todo undone xxx: modify item id=xxx undone
        cmd-todo del xxx: delete item id=xxx
        cmd-todo clear: delete all todos
    `.magenta)
}