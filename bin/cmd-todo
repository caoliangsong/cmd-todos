#!/usr/bin/env node

var main = require('../src/index')
var process = require('process')
var argv = process.argv
var argv2 = argv[2]
var colors= require('colors')

// get data

if(argv2 && argv2.toLowerCase() === 'get'){
    var n = argv[3]
    if(n === undefined){
         main.get()
    }else{
        main.get(n)
    }
}else if(argv2 && (argv2.toLowerCase() === 'done' ||argv2.toLowerCase() === 'undone' )){
    var n = parseInt(argv[3])
    if(typeof n !== 'number'){
        throw new Error('after done must be a number!')
    }
    main[argv2.toLowerCase()](n)
}else if(argv2 && (argv2 === 'add' || argv2 === 'del') ){
    if(typeof argv[3] === 'undefined'){
        throw new Error('add content can not be undefined')
    }
    main[argv2.toLowerCase()](argv[3])
}else if(argv2 && (argv2 === 'clear') ){
    main[argv2]()
}else{
    console.log(`
        cmd-todo@1.3.3
        ------------------------------------------
        commands:
            cmd-todo -h -help  show help 
            cmd-todo get:  show all todos
            cmd-todo add xxx: add new item set content xxx
            cmd-todo done xxx: modify item id=xxx done
            cmd-todo undone xxx: modify item id=xxx undone
            cmd-todo del xxx: delete item id=xxx
            cmd-todo clear: delete all todos
    `.magenta)
}